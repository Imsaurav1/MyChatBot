<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Syneix Ai Assistant</title>
  <link rel="icon" type="image/png" href="./templates/logo.png" />
	<meta name="google-adsense-account" content="ca-pub-3572576129639558">
  <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css"/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/9.1.6/marked.min.js"></script>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --bg: #0a0a0f;
      --surface: #13131a;
      --surface2: #1c1c28;
      --border: #2a2a3d;
      --accent: #7c6aff;
      --accent2: #ff6aad;
      --text: #e8e8f0;
      --text-dim: #8888aa;
      --user-bubble: #1e1b40;
      --bot-bubble: #13131a;
      --radius: 18px;
    }

    body {
      font-family: 'DM Sans', sans-serif;
      background: var(--bg);
      color: var(--text);
      height: 100dvh;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    /* Animated background */
    body::before {
      content: '';
      position: fixed;
      inset: 0;
      background:
        radial-gradient(ellipse 60% 40% at 20% 10%, #7c6aff18, transparent),
        radial-gradient(ellipse 50% 30% at 80% 90%, #ff6aad10, transparent);
      pointer-events: none;
      z-index: 0;
    }

    header {
      position: relative;
      z-index: 10;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 16px 24px;
      border-bottom: 1px solid var(--border);
      background: rgba(10,10,15,0.8);
      backdrop-filter: blur(20px);
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 10px;
      font-family: 'Syne', sans-serif;
      font-weight: 700;
      font-size: 1.2rem;
      letter-spacing: -0.02em;
    }

    .logo-icon {
      width: 32px; height: 32px;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      border-radius: 8px;
      display: flex; align-items: center; justify-content: center;
      font-size: 16px;
    }

    .model-badge {
      font-size: 0.72rem;
      font-family: 'DM Sans', sans-serif;
      font-weight: 400;
      background: var(--surface2);
      border: 1px solid var(--border);
      padding: 4px 10px;
      border-radius: 100px;
      color: var(--text-dim);
    }

    .header-right {
      display: flex; align-items: center; gap: 10px;
    }

    #reset-btn {
      background: transparent;
      border: 1px solid var(--border);
      color: var(--text-dim);
      padding: 6px 14px;
      border-radius: 100px;
      font-size: 0.8rem;
      font-family: 'DM Sans', sans-serif;
      cursor: pointer;
      transition: all 0.2s;
    }
    #reset-btn:hover { border-color: var(--accent); color: var(--accent); }

    #chat-container {
      flex: 1;
      overflow-y: auto;
      padding: 24px;
      display: flex;
      flex-direction: column;
      gap: 20px;
      position: relative;
      z-index: 1;
      scroll-behavior: smooth;
    }

    #chat-container::-webkit-scrollbar { width: 4px; }
    #chat-container::-webkit-scrollbar-track { background: transparent; }
    #chat-container::-webkit-scrollbar-thumb { background: var(--border); border-radius: 2px; }

    .message {
      display: flex;
      gap: 12px;
      max-width: 820px;
      width: 100%;
      animation: msgIn 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    @keyframes msgIn {
      from { opacity: 0; transform: translateY(12px) scale(0.98); }
      to   { opacity: 1; transform: translateY(0) scale(1); }
    }

    .message.user { align-self: flex-end; flex-direction: row-reverse; }
    .message.bot  { align-self: flex-start; }

    .avatar {
      width: 34px; height: 34px; flex-shrink: 0;
      border-radius: 10px;
      display: flex; align-items: center; justify-content: center;
      font-size: 15px;
      margin-top: 2px;
    }
    .message.user .avatar { background: linear-gradient(135deg, var(--accent), var(--accent2)); }
    .message.bot  .avatar { background: var(--surface2); border: 1px solid var(--border); }

    .bubble {
      padding: 13px 16px;
      border-radius: var(--radius);
      line-height: 1.65;
      font-size: 0.93rem;
      max-width: calc(100% - 46px);
    }

    .message.user .bubble {
      background: var(--user-bubble);
      border: 1px solid #3a3470;
      border-bottom-right-radius: 5px;
    }

    .message.bot .bubble {
      background: var(--bot-bubble);
      border: 1px solid var(--border);
      border-bottom-left-radius: 5px;
    }

    /* Markdown styles inside bubble */
    .bubble p { margin-bottom: 0.7em; }
    .bubble p:last-child { margin-bottom: 0; }
    .bubble h1,.bubble h2,.bubble h3 {
      font-family: 'Syne', sans-serif;
      margin: 0.8em 0 0.4em;
      color: var(--text);
    }
    .bubble code:not(pre code) {
      background: #1e1e2e;
      padding: 1px 6px;
      border-radius: 5px;
      font-size: 0.85em;
      font-family: 'Courier New', monospace;
      color: #cba6f7;
    }
    .bubble pre {
      background: #0d0d14;
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 14px;
      overflow-x: auto;
      margin: 10px 0;
      font-size: 0.83em;
    }
    .bubble ul, .bubble ol { padding-left: 20px; margin: 0.5em 0; }
    .bubble li { margin-bottom: 0.3em; }
    .bubble strong { color: #c0bbff; font-weight: 500; }
    .bubble blockquote {
      border-left: 3px solid var(--accent);
      padding-left: 12px;
      color: var(--text-dim);
      margin: 8px 0;
    }

    /* Typing indicator */
    .typing .bubble {
      display: flex; align-items: center; gap: 5px;
      padding: 14px 18px;
      min-width: 60px;
    }
    .dot {
      width: 7px; height: 7px;
      background: var(--text-dim);
      border-radius: 50%;
      animation: bounce 1.2s infinite;
    }
    .dot:nth-child(2) { animation-delay: 0.2s; }
    .dot:nth-child(3) { animation-delay: 0.4s; }
    @keyframes bounce {
      0%,80%,100% { transform: translateY(0); opacity: 0.4; }
      40%         { transform: translateY(-6px); opacity: 1; }
    }

    /* Welcome screen */
    #welcome {
      display: flex; flex-direction: column; align-items: center; justify-content: center;
      flex: 1; text-align: center; gap: 16px; padding: 40px 20px;
    }
    #welcome .big-icon {
      width: 64px; height: 64px;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      border-radius: 18px;
      display: flex; align-items: center; justify-content: center;
      font-size: 32px;
      box-shadow: 0 0 40px #7c6aff40;
    }
    #welcome h1 {
      font-family: 'Syne', sans-serif;
      font-size: clamp(1.5rem, 4vw, 2.2rem);
      font-weight: 700;
      letter-spacing: -0.03em;
    }
    #welcome p { color: var(--text-dim); font-size: 0.95rem; max-width: 400px; }

    .suggestions {
      display: flex; flex-wrap: wrap; gap: 8px; justify-content: center; margin-top: 8px;
    }
    .suggestion {
      background: var(--surface2);
      border: 1px solid var(--border);
      color: var(--text-dim);
      padding: 8px 16px;
      border-radius: 100px;
      font-size: 0.83rem;
      cursor: pointer;
      transition: all 0.2s;
    }
    .suggestion:hover { border-color: var(--accent); color: var(--accent); background: #7c6aff15; }

    /* Input area */
    footer {
      position: relative; z-index: 10;
      padding: 16px 24px 20px;
      background: rgba(10,10,15,0.85);
      backdrop-filter: blur(20px);
      border-top: 1px solid var(--border);
    }

    .input-wrap {
      max-width: 820px;
      margin: 0 auto;
      display: flex;
      align-items: flex-end;
      gap: 10px;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 20px;
      padding: 10px 12px 10px 18px;
      transition: border-color 0.2s;
    }
    .input-wrap:focus-within { border-color: var(--accent); box-shadow: 0 0 0 3px #7c6aff18; }

    #user-input {
      flex: 1;
      background: transparent;
      border: none;
      outline: none;
      color: var(--text);
      font-family: 'DM Sans', sans-serif;
      font-size: 0.93rem;
      line-height: 1.5;
      resize: none;
      max-height: 160px;
      min-height: 24px;
      padding: 2px 0;
    }
    #user-input::placeholder { color: var(--text-dim); }

    #send-btn {
      flex-shrink: 0;
      width: 38px; height: 38px;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      border: none;
      border-radius: 12px;
      color: white;
      font-size: 16px;
      cursor: pointer;
      display: flex; align-items: center; justify-content: center;
      transition: transform 0.15s, opacity 0.15s;
    }
    #send-btn:hover { transform: scale(1.05); }
    #send-btn:active { transform: scale(0.95); }
    #send-btn:disabled { opacity: 0.4; cursor: not-allowed; transform: none; }

    .hint {
      text-align: center;
      font-size: 0.72rem;
      color: var(--text-dim);
      margin-top: 10px;
      opacity: 0.6;
    }

    @media (max-width: 600px) {
      header { padding: 12px 16px; }
      #chat-container { padding: 16px; gap: 14px; }
      footer { padding: 12px 16px 16px; }
    }
  </style>

  <script defer src="/_vercel/insights/script.js"></script>
  <script defer src="/_vercel/speed-insights/script.js"></script>
	  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3572576129639558"
     crossorigin="anonymous"></script>
</head>
<body>

<header>
  <div class="logo">
    <div class="logo-icon">‚ú¶</div>
    AI Chat
  </div>
  <div class="header-right">
    <span class="model-badge">Gemini 1.5 Flash</span>
    <button id="reset-btn" onclick="resetChat()">‚Ü∫ New Chat</button>
  </div>
</header>

<div id="chat-container">
  <div id="welcome">
    <div class="big-icon">‚ú¶</div>
    <h1>How can I help you?</h1>
    <p>Ask me anything ‚Äî I'm powered by Google Gemini and ready to assist.</p>
    <div class="suggestions">
      <span class="suggestion" onclick="sendSuggestion(this)">Explain quantum computing</span>
      <span class="suggestion" onclick="sendSuggestion(this)">Write a Python function</span>
      <span class="suggestion" onclick="sendSuggestion(this)">Give me a creative story idea</span>
      <span class="suggestion" onclick="sendSuggestion(this)">Help me debug my code</span>
    </div>
  </div>
</div>

<footer>
  <div class="input-wrap">
    <textarea id="user-input" placeholder="Message AI..." rows="1" maxlength="4000"></textarea>
    <button id="send-btn" onclick="sendMessage()">‚û§</button>
  </div>
  <p class="hint">Press Enter to send ¬∑ Shift+Enter for new line</p>
</footer>

<script>
  const chatContainer = document.getElementById('chat-container');
  const userInput = document.getElementById('user-input');
  const sendBtn = document.getElementById('send-btn');

  // Generate a session ID
  let sessionId = 'session_' + Math.random().toString(36).substr(2, 9);
  let isFirstMessage = true;

  // Configure marked
  marked.setOptions({ breaks: true, gfm: true });

  // Auto-resize textarea
  userInput.addEventListener('input', () => {
    userInput.style.height = 'auto';
    userInput.style.height = Math.min(userInput.scrollHeight, 160) + 'px';
  });

  userInput.addEventListener('keydown', (e) => {
    if (e.key === 'Enter' && !e.shiftKey) {
      e.preventDefault();
      sendMessage();
    }
  });

  function removeWelcome() {
    const welcome = document.getElementById('welcome');
    if (welcome) welcome.remove();
  }

  function addMessage(content, role) {
    removeWelcome();
    const msg = document.createElement('div');
    msg.className = `message ${role}`;

    const avatar = document.createElement('div');
    avatar.className = 'avatar';
    avatar.textContent = role === 'user' ? 'üë§' : '‚ú¶';

    const bubble = document.createElement('div');
    bubble.className = 'bubble';

    if (role === 'bot') {
      bubble.innerHTML = marked.parse(content);
      // Highlight code blocks
      bubble.querySelectorAll('pre code').forEach(el => hljs.highlightElement(el));
    } else {
      bubble.textContent = content;
    }

    msg.appendChild(avatar);
    msg.appendChild(bubble);
    chatContainer.appendChild(msg);
    chatContainer.scrollTop = chatContainer.scrollHeight;
    return msg;
  }

  function addTypingIndicator() {
    const msg = document.createElement('div');
    msg.className = 'message bot typing';
    msg.id = 'typing';
    msg.innerHTML = `
      <div class="avatar">‚ú¶</div>
      <div class="bubble"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>
    `;
    chatContainer.appendChild(msg);
    chatContainer.scrollTop = chatContainer.scrollHeight;
  }

  function removeTypingIndicator() {
    const t = document.getElementById('typing');
    if (t) t.remove();
  }

  async function sendMessage() {
    const text = userInput.value.trim();
    if (!text || sendBtn.disabled) return;

    userInput.value = '';
    userInput.style.height = 'auto';
    sendBtn.disabled = true;

    addMessage(text, 'user');
    addTypingIndicator();

    try {
      const res = await fetch('/chat', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ message: text, session_id: sessionId })
      });

      const data = await res.json();
      removeTypingIndicator();

      if (data.error) {
        addMessage('‚ö†Ô∏è Error: ' + data.error, 'bot');
      } else {
        addMessage(data.reply, 'bot');
      }
    } catch (err) {
      removeTypingIndicator();
      addMessage('‚ö†Ô∏è Network error. Please try again.', 'bot');
    }

    sendBtn.disabled = false;
    userInput.focus();
  }

  async function resetChat() {
    await fetch('/reset', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ session_id: sessionId })
    });
    sessionId = 'session_' + Math.random().toString(36).substr(2, 9);
    chatContainer.innerHTML = `
      <div id="welcome">
        <div class="big-icon">‚ú¶</div>
        <h1>How can I help you?</h1>
        <p>Ask me anything ‚Äî I'm powered by Google Gemini and ready to assist.</p>
        <div class="suggestions">
          <span class="suggestion" onclick="sendSuggestion(this)">Explain quantum computing</span>
          <span class="suggestion" onclick="sendSuggestion(this)">Write a Python function</span>
          <span class="suggestion" onclick="sendSuggestion(this)">Give me a creative story idea</span>
          <span class="suggestion" onclick="sendSuggestion(this)">Help me debug my code</span>
        </div>
      </div>`;
  }

  function sendSuggestion(el) {
    userInput.value = el.textContent;
    sendMessage();
  }
</script>
</body>
</html>
